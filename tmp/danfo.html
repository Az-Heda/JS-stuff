<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Document</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="https://cdn.jsdelivr.net/npm/danfojs@1.1.2/lib/bundle.min.js"></script>
		<script>
			function randomNumber(min, max) {
				return Math.floor(Math.random() * (Math.max(min, max) - Math.min(min, max) + 1) + Math.min(min, max));
			}

			function randomNumberList(n, min, max) {
				return [ ...new Array(n).fill(0).map((_,i) => { return randomNumber(min, max)})];
			}

			function randomStringGenerator(n) {
				let numbers = new Array(n).fill(0).map((_, i) => { return randomNumber(97, 122)})
				return String.fromCharCode(...numbers)
			}

			function getDataset(options={}) {
				let headers = [ ...new Array(options?.cols || 3).fill(0).map((_, i) => { return randomStringGenerator(options?.headersLength || 5)}) ];
				let list = [];
				for (let pos = 0; pos < (options?.rows || 100); pos ++) {
					let o = {};
					headers.forEach((h) => { o[h] = randomNumber(options?.randomNumberMin || 0, options?.randomNumberMax || 100); })
					list.push(o);
				}
				return list;
			}

			function log(text, prt=false) {
				console.log(`%c [  ${text}  ] `, `background-color: #0A0; color: #000; font-weight: bold; padding: 4px; text-align: center; font-size: 18px`)
				// console.log(text)
				if (!prt) {  eval(text) }
				else { console.log(eval(text)) }
			}
		</script>
	</head>
	<body>
		<div id="test-chart"></div>
		<script>
			const dataset = getDataset({
				cols: 5,
				rows: 100,
				headersLength: randomNumber(5, 10),
				randomNumberMin: -1000,
				randomNumberMax: 1000,
			})
			const df = new dfd.DataFrame(dataset)
			
			// https://danfo.jsdata.org/getting-started
			log('df.print()'); 	
			log('df.ctypes.print()');
			log('df.head(2).print()');
			log('df.tail(2).print()');
			log('df.index', true);
			log('df.columns', true);
			log('df.tensor', true);
			log('df.shape', true);
			log('df.tensor.print()');
			log('df.describe().print()');
			// log(`df.sortValues('${Object.keys(dataset[0])[randomNumber(0, Object.keys(dataset[0]).length - 1)]}', { inplace: true; }); df.print()`)
			log(`df['${Object.keys(dataset[0])[0]}'].print()`);
			log(`df.loc( { rows: ["0:2"], columns: [${Object.keys(dataset[0]).splice(0, 2).map((i)=> { return `'${i}'`}).join(', ')}] } ).print()`);
			log('df.iloc({ rows: [1, 3, 5] }).print()')
			// log('df.iloc({ rows: ["20:25"] }).print()')
			// log(`df.iloc({ rows: ["20:25"], columns: ['2:4'] }).print()`);
			log(`df.iloc({ rows: df['${Object.keys(dataset[0])[0]}'].gt(950)}).print()`);
			log(`df.query(df['${Object.keys(dataset[0])[0]}'].gt(700).and(df['${Object.keys(dataset[0])[0]}'].lt(800))).print()`)
			log(`df[df['$columns'][0]].mean()`, true);
			log(`df.mean({ axis: 0 }).print()`, true);
			log(`df.mean({ axis: 1 }).print()`, true);
			log(`df.plot("test-chart").line({ config: {columns: [${Object.keys(dataset[0]).splice(0, 5).map((i) => { return `"${i}"` }).join(', ')}]}, layout: { title: 'test' }})`)
			log('dfd.toJSON(df)', true)
	</script>
	</body>
</html>